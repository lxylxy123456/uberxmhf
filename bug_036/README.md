# HP cannot boot Windows 10

## Scope
* HP, x64 Windows 10, x86 XMHF
* Cannot testing x86 Windows 10 easily due to bootloader issues
* good: QEMU

## Behavior
See also `bug_027` "Behavior" section, especially `20220109205416`

When booting x64 Windows 10 with x64 QEMU on HP, see different behaviors

Before `bug_027`
* Exception #GP on CPU 4, exception #MC on CPU 0 (`20220109205416`, 1 time)
* No output on serial port after E820 intercepts (3 times)

Before `bug_036`
* No output on serial port after E820 intercepts (1 time)

## Debugging

One suspect is something related to TPM. Windows 10's use of TPM caused
`bug_031`. We may want to hide the TPM from the guest OS.

In git `f0293308f`, we print all intercepts. Can see that CPU 0 stucks after
some int 15h BIOS calls. Serial in `20220116215157`. However, for VMCALL, we
need to read the stack to see actual RIP.

TODO: print VMCALL RIP

# tmp notes

TODO: HP stucks at when APs are not awake. Can use APs to send NMI to CPU 0
TODO: Can consider reading debug commands from serial port

